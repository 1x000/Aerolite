package net.ccbluex.liquidbounce.features.module.modules.movement.flys.exploit

import net.ccbluex.liquidbounce.event.EventState
import net.ccbluex.liquidbounce.event.MotionEvent
import net.ccbluex.liquidbounce.features.module.modules.movement.flys.FlyMode
import net.ccbluex.liquidbounce.utils.ClientUtils
import net.ccbluex.liquidbounce.value.ListValue
import net.minecraft.network.play.client.C03PacketPlayer.C04PacketPlayerPosition

class GrimFly : FlyMode("Grim") {
    private val wayValue = ListValue("Way", arrayOf("C04", "SetPosition", "MotionEdit"), "C04")
    override fun onEnable() {
        ClientUtils.displayAlert("Get large velocity to fly! (TNT,Knockback...)")
    }

    override fun onMotion(event: MotionEvent) {
        val x = mc.thePlayer.posX
        val y = mc.thePlayer.posY
        val z = mc.thePlayer.posZ
        val onGround = mc.thePlayer.onGround
        if (event.eventState == EventState.PRE) {
            if (wayValue.get() == "C04") mc.netHandler.addToSendQueue(C04PacketPlayerPosition(x + 1000, y, z, onGround))
            if (wayValue.get() == "SetPosition") mc.thePlayer.setPosition(x + 1000, y, z)
            if (wayValue.get() == "MotionEdit") event.x += 1000
        }
    }

}